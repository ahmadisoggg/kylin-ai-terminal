# ProGuard configuration for HeadStealX obfuscation

# Keep main plugin class and entry points
-keep public class com.headstealx.Main {
    public void onEnable();
    public void onDisable();
    public void onLoad();
}

# Keep Bukkit/Spigot API interfaces and annotations
-keep @org.bukkit.event.EventHandler class * {
    @org.bukkit.event.EventHandler *;
}

-keep class * extends org.bukkit.plugin.java.JavaPlugin
-keep class * implements org.bukkit.event.Listener
-keep class * implements org.bukkit.command.CommandExecutor
-keep class * implements org.bukkit.command.TabCompleter

# Keep plugin.yml accessible classes
-keep class * implements org.bukkit.command.CommandExecutor {
    public boolean onCommand(org.bukkit.command.CommandSender, org.bukkit.command.Command, java.lang.String, java.lang.String[]);
}

-keep class * implements org.bukkit.command.TabCompleter {
    public java.util.List onTabComplete(org.bukkit.command.CommandSender, org.bukkit.command.Command, java.lang.String, java.lang.String[]);
}

# Keep reflection-accessed methods
-keepclassmembers class * {
    @org.bukkit.event.EventHandler *;
}

# Keep enum values
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

# Keep serialization
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}

# Obfuscation settings
-repackageclasses 'obf'
-allowaccessmodification
-mergeinterfacesaggressively

# String encryption (basic)
-adaptclassstrings
-adaptresourcefilenames
-adaptresourcefilecontents **.properties,**.xml,**.yml

# Control flow obfuscation
-optimizations !code/simplification/arithmetic,!code/simplification/cast,!field/*,!class/merging/*

# Optimization passes
-optimizationpasses 3

# Shrinking
-dontshrink

# Keep line numbers for debugging (remove in production)
-keepattributes SourceFile,LineNumberTable

# Anti-debug protection
-keep class com.headstealx.util.AntiTamper {
    public static void verify();
}

# Warnings
-dontwarn **
-ignorewarnings

# Output
-printmapping mapping.txt
-printseeds seeds.txt
-printusage usage.txt